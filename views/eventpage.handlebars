<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <title>Effective-Eureka</title>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-theme.css" rel="stylesheet">
    <!--    <link href="css/spacelab.css" rel="stylesheet">-->
    <link href="/css/style.css" rel="stylesheet">
    <!-- These lines are needed for Javascript and also enables Heroku to publish our app -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="/js/handlebars-v4.0.5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script language="JavaScript" type="text/javascript">
        function login(showhide) {
            if (showhide == "show") {
                document.getElementById('popupbox').style.visibility = "visible";
            } else if (showhide == "hide") {
                document.getElementById('popupbox').style.visibility = "hidden";
            }
        }
    </script>

</head>
<header>
    <div class="custom-container">
        <div class="navigationbar-flex navbar-default">
            <div class="flexleft">
                <a class="navigationbar-item" href="/landingpage">
                    <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
                </a>
            </div>
            <form class="search-form flexleft">
                <input type="text" class="search-box" placeholder="Search">
            </form>
            <div class="flexright">
                <a class="navigationbar-item" href="/eventlistpage/all">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                </a>
                <a class="navigationbar-item" href="/addeventpage">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                </a>
                <a class="navigationbar-item" href="/profilepage">
                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                </a>
            </div>
        </div>
    </div>
</header>

<!--Main body of page-->

<body class="container">
    <div class="g-grid">
        <section class="1-pad-bot-5 1-sm-pad-bot-3">
            <div class="js-popular-events">
                <div class="js-events-list">
                    <div class="g-cell g-cell--has-overflow g-cell-1-1 g-cell-md-1-2-g-cell-lg-1-3 1-pad-vert-3" role="row">
                        <div class="well well-lg" style="margin-bottom:0px" role="gridcell">
                            <div class="poster-card__image" style="display: inline-block">
                                <table>
                                    <tr>
                                        <style type="text/css">
                                            td {
                                                padding: 0 10px 0 5px;
                                            }
                                        </style>
                                        <td>
                                            <img style="height:150px;width:150px" class="img-responsive" src="{{img}}">
                                        </td>
                                        <td>
                                            <div style="display: inline-block">
                                                <h3>{{eventname}}</h3>
                                                <p style="display: inline-block" id="date">
                                                    {{date}}
                                                </p>
                                                <p style="display: inline-block" id="time">
                                                    {{time}}
                                                </p>
                                                <p id="location">
                                                    {{location}}
                                                </p>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <style type="text/css">
                                .dropdown {
                                    padding: 0 10px 0 5px;
                                }
                                
                                .classA {
                                    background: lightgray;
                                }
                                
                                .classB {
                                    background: lightgreen;
                                }
                            </style>

                            <script>
                                console.log({{showAlternate}});
                            </script>
                            {{#if showAlternate}}
                            <div class="dropdown">
                                <script>
                                    function change() // no ';' here
                                    {
                                        var elem = document.getElementById("followButton");
                                        if (elem.value == "Not Following") elem.value = "Following";
                                        else elem.value = "Not Following";
                                        
                                        ga('send','event','followToggle','click');
                                    }
                                </script>
                                <input onclick="change()" type="button" value="Not Following" id="followButton" style="width: 150px; padding: 5px">
                            </div>

                            {{else}}
                            <div class="dropdown">
                                <script>
                                    function change() // no ';' here
                                    {
                                        var elem = document.getElementById("followButton");
                                        if (elem.value == "Follow")
                                            elem.value = "Following";
                                        else elem.value = "Follow";
                                    }

                                    function colorchange(id) {
                                        var el = document.getElementById(id);
                                        var currentClass = el.getAttribute("class");
                                        if (currentClass == 'classA') {
                                            el.setAttribute("class", "classB");
                                        } else {
                                            el.setAttribute("class", "classA");
                                        }

                                    }
                                </script>
                                <input onclick="colorchange('followButton'), change()" class="classA" type="button" value="Follow" id="followButton" style="width: 150px; padding: 5px">
                            </div>
                            {{/if}}
                        </div>
                        <!--^ Defines end of the well-->
                        <script>
                            $(function () {
                                $("#details").click(function () {
                                    console.log("this works!");
                                    $("#details").attr('class', 'active');
                                    $("#discussion").attr('class', '');
                                    $("#contents").html("<p>{{about}}</p>");
                                });
                            });
                            $(function () {
                                $("#discussion").click(function () {
                                    console.log("this works too!");
                                    $("#discussion").attr('class', 'active');
                                    $("#details").attr('class', '');
                                    //$("#contents").html("");
                                    document.getElementById("contents").innerHTML = '<object type="type/html" data="discusspage.html" ></object>';

                                });
                            });
                        </script>
                        <div class="flexbox flex-tabs">
                            <a href="">
                                <div class="active" id="details">Details</div>
                            </a>
                            <a href="">
                                <div id="discussion">Discussion</div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="contents">
        {{about}}
    </div>
    {{>googleAnalytics}}
</body>

</html>